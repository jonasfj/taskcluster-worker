$schema:            http://json-schema.org/draft-04/schema#
title:              Config
description: |-
  The global configuration settings used by taskcluster-worker, not particular
  to any engine or plugin.
type:               object
properties:
  pollingInterval:
    title: "PollingInterval"
    description: "The amount of time to wait between task polling iterations"
    type: "integer"
  taskcluster:
    title: TaskclusterProperties
    description: Properties related to the TaskCluster Platform
    type: object
    properties:
      queue:
        title: TaskclusterQueueProperties
        description: Properties defining interaction with the TaskCluster queue
        type: object
        properties:
          url:
            title: BaseUrl
            description: Base URL for TaskCluster queue
            type: string
  credentials:
    title:          Credentials
    description: |-
      The set of credentials that should be used by the worker when
      authenticating against taskcluster endpoints.
    type:           object
    properties:
      clientId:
        title:          ClientId
        description: |-
          The Client ID for the client. Not very helpful, am I?
        type:           string
        pattern:        ^[A-Za-z0-9@/:._-]+$
      accessToken:
        title:          AccessToken
        description: |-
          The security-sensitive access token for the client. Do not share or expose!
        pattern:        ^[a-zA-Z0-9_-]{22,66}$
        type:           string
      certificate:
        title:          Certificate
        description: |-
          The certificate for the client, if using temporary credentials and/or using authorized scopes.
        type:           string
    required:
      - clientId
      - accessToken
      - certificate
  provisionerId:
    title:          ProvisionerID
    description: |-
      The provisioner (if any) that is responsible for spawning instances of this worker. Typically `aws-provisioner-v1`.
    type:           string
  workerGroup:
    title:          WorkerGroup
    description: |-
      A logical group for this worker to belong to, such as an AWS region.
    type:           string
  workerType:
    title:          WorkerType
    description: |-
      Type of worker pool the worker belongs to.
    type:           string
  workerId:
    title:          WorkerID
    description: |-
      A unique name that can be used to identify which worker instance this is (such as AWS instance id).
    type:           string
  capacity:
    title:          Capacity
    description: |-
      The number of tasks that this worker supports running in parallel.
    type:           integer
  queueService:
    title:          QueueService
    description: |-
      Configuration relating to the polling of the TaskCluster Queue.
    type:           object
    properties:
      expirationOffset:
        title:          ExpirationOffset
        description: |-
          The number of seconds prior to the task claim expiry that tasks should be reclaimed.
        type:           integer
    required:
      - expirationOffset
  statelessHostname:
    title: StatelessHostname
    description: |-
      Configuration for the stateless hostname generation
    type: object
    properties:
      enabled:
        title: Enabled
        description: |-
          Enables or disables the stateless hostname generation
        type: boolean
      secret:
        title: Secret
        description: |-
          Secret used when generating stateless hostname
        type: string
      domain:
        title: Domain
        description: |-
          Domain to use when generating stateless hostname
        type: string
    required:
      - enabled
      - secret
      - domain
additionalProperties: false
required:
  - credentials
  - provisionerId
  - workerGroup
  - workerId
  - capacity
  - queueService
